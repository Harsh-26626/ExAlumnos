<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignUp as Alumni</title>
    <link rel="html" type="text/html" href="header.html" />
</head>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: #F8F8FF;
    }

    .title{
            margin-top: 60px;
            text-decoration: solid;
            font-size: 2em;
            font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    }

    .background{
        display: flex;
        background-color: #fefefe;
        margin-top: 25px;
        padding: 50px;
        border-radius: 15px;
        margin-left: 15%;
        margin-right: 15%;
    }

    #name{
        background: transparent;
        outline-style: none;
        border-top: none;
        border-left: none;
        border-right: none;
        border-bottom: solid #000000 1px;
        box-shadow: 0 0 0;
        width: 100%;
    }

    #imgcontainer{
        background-image: url('base.jpg');
        width: 50%;
        height: 700px;
        border-radius: 15px;
        background-size: cover;
    }

    .college{
    position: relative;
    display: inline-block;
    background-color: #3C3D37;
    color: white;
    padding: 16px;
    border-radius: 15px;
    text-align: center;
    }

    #branch{
    position: relative;
    display: inline-block;
    background-color: #3C3D37;
    color: white;
    border-radius: 15px;
    text-align: center;
    height: 50px;
    width: 45%;
    }

    #year{
    position: relative;
    display: inline-block;
    background-color: #3C3D37;
    color: white;
    border-radius: 15px;
    text-align: center;
    height: 50px;
    width: 45%;
    }

    #email{
        background: transparent;
        outline-style: none;
        border-top: none;
        border-left: none;
        border-right: none;
        border-bottom: solid #000000 1px;
        box-shadow: 0 0 0;
        width: 100%;    
    }

    .cta-button4{
        padding: 10px 20px;
        background-color: black;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10%;
        margin-left: 10%;
        width: 80%;
    }

    .cta-button4:hover {
    background-color: #333;
    }/* Your styles */

    #password{
        background: transparent;
        outline-style: none;
        border-top: none;
        border-left: none;
        border-right: none;
        border-bottom: solid #000000 1px;
        box-shadow: 0 0 0;
        width: 100%;
    }

    #confirmPassword{
        background: transparent;
        outline-style: none;
        border-top: none;
        border-left: none;
        border-right: none;
        border-bottom: solid #000000 1px;
        box-shadow: 0 0 0;
        width: 100%;
    }

</style>
<body>
    <header id="header-placeholder"></header>

<script>
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header-placeholder').innerHTML = data;
    });
</script>

    <div class="background">
        <div id="imgcontainer">
            <p style="font-size: 3em; color:#3C3D37; text-align: center;">ExAlumnos</p>
            <p style="font-size: 1.3em; font-family: 'Courier New', Courier, monospace; color: #f8f8ff; padding-top: 40px; text-align: end; padding-right: 5%;">Learning doesn’t end with graduation, it evolves with connection.</p>
            <p style="font-size: 1.3em; font-family: 'Courier New', Courier, monospace; color: #f8f8ff; padding-top: 125px; text-align: center;">Celebrate your journey,<br> inspire the next.</p>
            <p style="font-size: 1.3em; font-family: 'Courier New', Courier, monospace; padding-left: 5%; color: #f8f8ff; padding-top: 135px;">Your network is your net worth <br> let’s build it together.</p>
        </div>
        <div style="padding-left: 5%;">
            <nav class="title">Create an Account</nav> 
            <p style="font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">Let's get started as <b>Alumni</b></p>
            
            <!-- Registration Form -->
            <form id="registrationForm" enctype="multipart/form-data">
                <div style="margin-top:30px;">
                    <label for="name"><p style="font-family:Georgia, 'Times New Roman', Times, serif;">Name</p></label>
                    <input type="text" id="name" name="name" placeholder="Enter Your Name" required>
                </div>
                <div style="margin-top: 30px;">
                    <select style="margin-top: 10px;" class="college" name="college" required>
                        <option value="" disabled selected>Your College</option>
                        <option value="Gyan Ganga Institute Of Technology And Sciences">Gyan Ganga Institute Of Technology And Sciences</option>
                        <option value="Gyan Ganga College Of Technology">Gyan Ganga College Of Technology</option>
                        <option value="Gyan Ganga College of Excellence">Gyan Ganga College of Excellence</option>
                    </select>
                </div>

                <div style="display: flex; height: 50px;">
                    <div style="margin-top: 30px; flex: 0 0 70%;">
                        <select id="branch" name="branch" required>
                            <option value="" disabled selected>Branch</option>
                            <option value="CSE">CSE</option>
                            <option value="AIML">AIML</option>
                            <option value="CSBS">CSBS</option>
                            <option value="IOT">IOT</option>
                            <option value="AIR">AIR</option>
                            <option value="IT">IT</option>
                            <option value="EC">EC</option>
                            <option value="EX">EX</option>
                            <option value="MECH">MECH</option>
                            <option value="CIVIL">CIVIL</option>
                        </select>
                    </div>
                    <div style="margin-top: 30px; flex: 0 0 70%;">
                        <select id="year" name="year" required>
                            <option value="" disabled selected>Grad Year</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                            <option value="2021">2021</option>
                            <option value="2020">2020</option>
                            <option value="2019">2019</option>
                            <option value="2018">2018</option>
                            <option value="2017">2017</option>
                            <option value="2016">2016</option>
                            <option value="2015">2015</option>
                            <option value="2014">2014</option>
                            <option value="2013">2013</option>
                            <option value="2012">2012</option>
                            <option value="2011">2011</option>
                            <option value="2010">2010</option>
                            <option value="2009">2009</option>
                            <option value="2008">2008</option>
                            <option value="2007">2007</option>
                            <option value="2006">2006</option>
                            <option value="2005">2005</option>
                            <option value="2004">2004</option>
                            <option value="2003">2003</option>
                        </select>
                    </div>
                </div>

                <div style="margin-top:70px;">
                    <label for="email"><p style="font-family:Georgia, 'Times New Roman', Times, serif;">Email</p></label>
                    <input type="text" id="email" name="email" placeholder="Enter Your Email" required>
                </div>

                <div style="margin-top:25px;">
                    <label for="password"><p style="font-family:Georgia, 'Times New Roman', Times, serif;">Password</p></label>
                    <input type="password" id="password" name="password" maxlength="16" placeholder="Max 16 characters" required><br><br>
                    <label for="confirmPassword"><p style="font-family:Georgia, 'Times New Roman', Times, serif;">Confirm Password</p></label>
                    <input type="password" id="confirmPassword" name="confirmPassword" maxlength="16" placeholder="Max 16 characters" required><br><br>
                    <input type="checkbox" onclick="myFunction()">Show Password
                </div>

                <div style="margin-top: 30px;">
                    <label for="profilePhoto"><p style="font-family:Georgia, 'Times New Roman', Times, serif;">Profile Photo</p></label>
                    <input type="file" id="profilePhoto" name="profilePic" accept="image/*" required>
                </div>
                
                <div style="margin-top: 30px;">
                    <label for="bannerImage"><p style="font-family:Georgia, 'Times New Roman', Times, serif;">Banner Image</p></label>
                    <input type="file" id="bannerImage" name="bannerPic" accept="image/*" required>
                </div>

                <button type="submit" class="cta-button4">Create Account</button>
            </form>

        </div>
    </div>
</body>

<script>
    function myFunction() {
        var x = document.getElementById("password");
        if (x.type === "password") {
            x.type = "text";
        } else {
            x.type = "password";
        }
    }

    // Form submission logic
    document.getElementById('registrationForm').addEventListener('submit', async function (event) {
    event.preventDefault(); // Prevent the page from refreshing

    const formData = new FormData(this); // Includes file inputs automatically

    try {
    // Log the form data being sent
    console.log('Sending request with data:', formData);

    const response = await fetch('http://localhost:3000/api/register', {
        method: 'POST',
        body: formData, // Send as FormData for file handling
    });

    if (response.ok) {
        const responseData = await response.json();

        // Log the response data
        console.log('Response received:', responseData);

        alert(responseData.message || 'Registration successful!');
    } else {
        const errorData = await response.json();

        // Log the error data if response is not ok
        console.error('Error received:', errorData);

        alert(errorData.error || 'There was an issue with the registration!');
    }
} catch (error) {
    console.error('Error:', error);

    // Log the error details
    alert('An unexpected error occurred. Please try again.');
}
});

</script>
</html>
